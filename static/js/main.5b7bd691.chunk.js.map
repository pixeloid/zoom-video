{"version":3,"sources":["component/icon-font.ts","feature/home/home.tsx","context/zoom-context.ts","context/media-context.ts","feature/video/components/avatar.tsx","feature/video/components/camera.tsx","feature/video/components/microphone.tsx","feature/video/components/screen-share.tsx","hooks/usePrevious.ts","hooks/useUnmount.ts","feature/video/components/video-footer.tsx","feature/video/components/pagination.tsx","feature/video/hooks/useCanvasDimension.ts","hooks/useSizeCallback.ts","feature/video/video-layout-helper.ts","feature/video/hooks/useRenderVideo.ts","utils/util.ts","hooks/usePersistFn.ts","feature/video/hooks/useGalleryLayout.ts","feature/video/hooks/usePagination.ts","feature/video/video.tsx","feature/video/hooks/useAvtiveVideo.ts","feature/video/hooks/useShare.ts","context/chat-context.ts","component/loading-layer.tsx","feature/chat/chat-constant.ts","feature/chat/component/chat-message-item.tsx","feature/chat/component/chat-receiver.tsx","feature/chat/chat.tsx","feature/chat/hooks/useParticipantsChange.ts","App.tsx","reportWebVitals.js","config/dev.ts","utils/platform.ts","index.tsx"],"names":["IconFont","createFromIconfontCN","scriptUrl","Meta","Card","Home","props","history","className","href","src","alt","target","rel","key","icon","title","description","map","feature","cover","style","fontSize","type","hoverable","width","onClick","push","location","search","React","createContext","Avatar","participant","isActive","displayName","audio","muted","bVideoOn","classNames","background","AudioMutedOutlined","color","CameraButton","isStartedVideo","onCameraClick","VideoCameraOutlined","VideoCameraAddOutlined","ghost","shape","size","MicrophoneButton","isStartedAudio","isMuted","onMicrophoneClick","tooltipText","AudioOutlined","ScreenShareButton","isStartedScreenShare","onScreenShareClick","usePrevious","ref","useRef","useEffect","current","useUnmount","fn","fnRef","useMount","VideoFooter","shareRef","sharing","useState","setIsStartedAudio","setIsStartedVideo","setIsStartedScreenShare","setIsMuted","mediaStream","useContext","ZoomMediaContext","zmClient","ZoomContext","useCallback","a","stopVideo","startVideo","unmuteAudio","muteAudio","startAudio","onHostAudioMuted","payload","action","source","message","info","startShareScreen","stopShareScreen","onPassivelyStopShare","reason","console","log","on","off","stopAudio","Pagination","page","totalPage","setPage","inSharing","pageIndication","toPreviousPage","toNextPage","classnames","CaretLeftOutlined","CaretRightOutlined","useCanvasDimension","videoRef","callback","height","dimension","setDimension","onCanvasResize","_","debounce","call","useLayoutEffect","resizeObserver","ResizeObserver","entries","forEach","entry","clientWidth","clientHeight","observe","unobserve","disconnect","getBoundingClientRect","e","updateVideoCanvasDimension","layoutCandidates","Array","from","length","value","index","count","mid","Math","ceil","candidates","v","i","row","column","reduce","prev","curr","VideoQuality","maxRowsColumns","maxColumns","max","floor","maxRows","useRenderVideo","isVideoDecodeReady","layout","subscribedVideos","participants","previousSubscribedVideos","previousLayout","previousParticipants","previousIsVideoDecodeReady","addedSubscribers","filter","id","includes","removedSubscribers","unalteredSubscribers","userId","stopRenderVideo","findIndex","user","cellDimension","x","y","quality","renderVideo","objA","objB","aKeys","Object","keys","bKeys","len","prototype","hasOwnProperty","isShallowEqual","adjustRenderedVideoPosition","participantsIds","previousParticipantsIds","join","stopAllVideos","persistFn","args","apply","this","usePersistFn","videoCanvasDOM","useGalleryLayout","pagination","visibleParticipants","setVisibleParticipants","setLayout","setSubscribedVideos","pageSize","totalSize","min","rootWidth","rootHeight","actualCount","preferredLayout","item","canonical","cellWidth","cellOffset","cellHeight","cellArea","cellBoxWidth","cellBoxHeight","horizontalMargin","verticalMargin","cellDimensions","lastRowMargin","j","leftMargin","getVideoLayout","onParticipantsChange","getAllUser","currentUser","getCurrentUserInfo","pageParticipants","sort","user1","user2","Number","splice","_user","videoParticipants","usePagination","setTotalSize","setPageSize","maxViewportVideoCounts","VideoContainer","video","decode","selfShareRef","shareContainerRef","canvasDimension","activeVideo","setActiveVideo","activeSpeaker","setActiveSpeaker","onVideoActiveChange","state","onActiveSpeakerChange","isArray","useActiveVideo","videoLayout","isRecieveSharing","setIsReceiveSharing","isStartedShare","setIsStartedShare","activeSharingId","setActiveSharingId","sharedContentDimension","setSharedContentDimension","currentUserId","setCurrentUserId","onActiveShareChange","onSharedContentDimensionChange","onCurrentUserUpdate","undefined","sharerOn","previousIsRecieveSharing","startShareView","stopShareView","activeSharedUserId","getActiveShareUserId","useShare","isSharing","contentDimension","containerWidth","containerHeight","ratio","hidden","canvasHeight","top","left","LoadingLayer","content","LoadingOutlined","ChatPrivilege","ChatMessageItem","record","setChatUser","sender","receiver","timestamp","avatar","isCurrentUser","onAvatarClick","chatMessage","myself","UserOutlined","name","event","preventDefault","Date","toLocaleTimeString","text","MenuItem","Menu","Item","MenuItemGroup","ItemGroup","meetingChatPrivilegeList","NoOne","EveryonePublicly","All","ChatReceiverContainer","chatUsers","selectedChatUser","chatPrivilege","isHostOrManager","chatClient","ChatContext","menuItems","selected","CheckOutlined","isCoHost","isHost","onMenuItemClick","onMenuItemPrivilegeClick","privilege","setPrivilege","menu","privilegeMenu","privilegeMenuItems","overlay","placement","trigger","DownOutlined","DashOutlined","TextArea","Input","ChatContainer","chatRecords","setChatRecords","chatReceivers","setChatReceivers","setChatPrivilege","chatUser","setIsHost","isManager","setIsManager","chatDraft","setChatDraft","chatWrapRef","onChatMessage","produce","records","lastRecord","scrollTo","scrollHeight","onChatPrivilegeChange","getReceivers","onChatInput","useParticipantsChange","setChatUserId","find","u","sendMessage","send","getSessionInfo","getPrivilege","onPressEnter","onChange","placeholder","mediaShape","encode","share","mediaReducer","draft","App","meetingArgs","sdkKey","topic","signature","password","loading","setIsLoading","loadingText","setLoadingText","isFailover","setIsFailover","useReducer","mediaState","dispatch","setMediaStream","setChatClient","init","window","origin","getMediaStream","getChatClient","error","ZoomMtgCm","destroyClient","onConnectionChange","Modal","warning","onMediaSDKChange","result","Provider","path","component","exact","Video","Chat","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","devConfig","sdkSecret","userAgent","navigator","indexOf","ActiveXObject","getExploreName","random","fromEntries","URLSearchParams","passWord","iat","round","getTime","oHeader","alg","typ","oPayload","app_key","exp","tpc","pwd","sHeader","JSON","stringify","sPayload","KJUR","jws","JWS","sign","generateSignature","createClient","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5b7bd691.chunk.js","sourcesContent":["import { createFromIconfontCN } from '@ant-design/icons';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const IconFont = createFromIconfontCN({\n  scriptUrl: [\n    '//at.alicdn.com/t/font_2183897_b5xllwmo50n.js', // icon-meeting\n  ],\n});\n","/* eslint-disable no-restricted-globals */\nimport React from 'react';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { Card } from 'antd';\nimport { IconFont } from '../../component/icon-font';\nimport './home.scss';\n\nconst { Meta } = Card;\nconst Home: React.FunctionComponent<RouteComponentProps> = (props) => {\n  const { history } = props;\n  const onCardClick = (type: string) => {\n    history.push(`/${type}${location.search}`);\n  };\n  const featureList = [\n    {\n      key: 'video',\n      icon: 'icon-meeting',\n      title: 'Audio, video and share',\n      description:\n        'Gallery Layout, Start/Stop Audio, Mute/Unmute, Start/Stop Video, Start/Stop Screen Share',\n    },\n    {\n      key: 'chat',\n      icon: 'icon-chat',\n      title: 'Session chat',\n      description: 'Session Chat, Chat Priviledge',\n    },\n  ];\n  return (\n    <div>\n      <div className=\"flex fixed nav\">\n        <a href=\"/\" className=\"h-full flex items-center router-active navhome\">\n          <img src=\"./logo.svg\" alt=\"Home\" className=\"h-20px\" />\n          <span className=\"text-second pl-4 ml-4 border-l border-line weak-hidden sm:inline-block\">\n            VideoSDK\n          </span>\n        </a>\n\n        <a\n          href=\"https://marketplace.zoom.us/docs/sdk/video/web/reference\"\n          className=\"h-full flex items-center router-active navdoc\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          <span className=\"text-second pl-4 ml-4 border-l border-line weak-hidden sm:inline-block\">\n            API Reference\n          </span>\n        </a>\n\n        <a\n          href=\"https://marketplace.zoom.us/docs/sdk/video/web/essential\"\n          className=\"h-full flex items-center router-active navdoc\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          <span className=\"text-second pl-4 ml-4 border-l border-line weak-hidden sm:inline-block\">\n            Doc\n          </span>\n        </a>\n      </div>\n\n      <div className=\"home\">\n        <h1>Zoom Video SDK feature</h1>\n        <div className=\"feature-entry\">\n          {featureList.map((feature) => {\n            const { key, icon, title, description } = feature;\n            return (\n              <Card\n                cover={<IconFont style={{ fontSize: '72px' }} type={icon} />}\n                hoverable\n                style={{ width: 320 }}\n                className=\"entry-item\"\n                key={key}\n                onClick={() => onCardClick(key)}\n              >\n                <Meta title={title} description={description} />\n              </Card>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n};\nexport default Home;\n","import React from 'react';\nimport { ZoomClient } from '../index-types';\nexport default React.createContext<ZoomClient>(null as any);\n","import React from 'react';\nimport { MediaStream } from '../index-types';\ninterface MediaContext {\n  audio: {\n    encode: boolean;\n    decode: boolean;\n  };\n  video: {\n    encode: boolean;\n    decode: boolean;\n  };\n  share: {\n    encode: boolean;\n    decode: boolean;\n  };\n  mediaStream: MediaStream | null;\n}\nexport default React.createContext<MediaContext>(null as any);\n","import React from 'react';\nimport { AudioMutedOutlined } from '@ant-design/icons';\nimport classNames from 'classnames';\nimport './avatar.scss';\nimport { Participant } from '../../../index-types';\ninterface AvatarProps {\n  participant: Participant;\n  style: { [key: string]: string };\n  isActive: boolean;\n}\nconst Avatar = (props: AvatarProps) => {\n  const { participant, style, isActive } = props;\n  const { displayName, audio, muted, bVideoOn } = participant;\n  return (\n    <div\n      className={classNames('avatar', { 'avatar-active': isActive })}\n      style={{ ...style, background: bVideoOn ? 'transparent' : 'rgb(26,26,26)' }}\n    >\n      {(bVideoOn || (audio === 'computer' && muted)) && (\n        <div className=\"corner-name\">\n          {audio === 'computer' && muted && (\n            <AudioMutedOutlined style={{ color: '#f00' }} />\n          )}\n          {bVideoOn && <span>{displayName}</span>}\n        </div>\n      )}\n      {!bVideoOn && <p className=\"center-name\">{displayName}</p>}\n    </div>\n  );\n};\n\nexport default Avatar;\n","import React from 'react';\nimport { Button, Tooltip } from 'antd';\nimport { VideoCameraAddOutlined, VideoCameraOutlined } from '@ant-design/icons';\nimport classNames from 'classnames';\nimport './camera.scss';\ninterface CameraButtonProps {\n  isStartedVideo: boolean;\n  onCameraClick: () => void;\n  className?: string;\n}\nconst CameraButton = (props: CameraButtonProps) => {\n  const { isStartedVideo, onCameraClick, className } = props;\n  return (\n    <Tooltip title={`${isStartedVideo ? 'stop camera' : 'start camera'}`}>\n      <Button\n        className={classNames('camere-button', className)}\n        icon={isStartedVideo ? <VideoCameraOutlined /> : <VideoCameraAddOutlined />}\n        // eslint-disable-next-line react/jsx-boolean-value\n        ghost={true}\n        shape=\"circle\"\n        size=\"large\"\n        onClick={onCameraClick}\n      />\n    </Tooltip>\n  );\n};\nexport default CameraButton;\n","/* eslint-disable no-nested-ternary */\nimport React from 'react';\nimport { Button, Tooltip } from 'antd';\nimport classNames from 'classnames';\nimport { AudioOutlined, AudioMutedOutlined } from '@ant-design/icons';\nimport { IconFont } from '../../../component/icon-font';\nimport './microphone.scss';\ninterface MicrophoneButtonProps {\n  isStartedAudio: boolean;\n  isMuted: boolean;\n  onMicrophoneClick: () => void;\n  className?: string;\n}\nconst MicrophoneButton = (props: MicrophoneButtonProps) => {\n  const { isStartedAudio, isMuted, onMicrophoneClick, className } = props;\n  const tooltipText = isStartedAudio ? (isMuted ? 'unmute' : 'mute') : 'start audio';\n  return (\n    <Tooltip title={tooltipText}>\n      <Button\n        className={classNames('microphone-button', className)}\n        icon={\n          isStartedAudio ? (\n            isMuted ? (\n              <AudioMutedOutlined />\n            ) : (\n              <AudioOutlined />\n            )\n          ) : (\n            <IconFont type=\"icon-headset\" />\n          )\n        }\n        ghost\n        shape=\"circle\"\n        size=\"large\"\n        onClick={onMicrophoneClick}\n      />\n    </Tooltip>\n  );\n};\n\nexport default MicrophoneButton;\n","import React from 'react';\nimport { Button, Tooltip } from 'antd';\nimport classNames from 'classnames';\nimport { IconFont } from '../../../component/icon-font';\nimport './screen-share.scss';\ninterface ScreenShareButtonProps {\n  isStartedScreenShare: boolean;\n  onScreenShareClick: () => void;\n}\nconst ScreenShareButton = (props: ScreenShareButtonProps) => {\n  const { isStartedScreenShare, onScreenShareClick } = props;\n  return (\n    <Tooltip\n      title={isStartedScreenShare ? 'stop screen share' : 'start screen share'}\n    >\n      <Button\n        className={classNames('screen-share-button', {\n          'started-share': isStartedScreenShare,\n        })}\n        icon={<IconFont type=\"icon-share\" />}\n        // eslint-disable-next-line react/jsx-boolean-value\n        ghost={true}\n        shape=\"circle\"\n        size=\"large\"\n        onClick={onScreenShareClick}\n      />\n    </Tooltip>\n  );\n};\n\nexport default ScreenShareButton;\n","import { useRef, useEffect } from 'react';\n\nexport function usePrevious<T>(props: T): T | null {\n  const ref = useRef<T | null>(null);\n  useEffect(() => {\n    ref.current = props;\n  }, [props]);\n  return ref.current;\n}\n","import { useEffect, useRef } from 'react';\n\nexport function useUnmount(fn: Function) {\n  const fnRef = useRef<Function>(fn);\n  fnRef.current = fn;\n  useEffect(\n    () => () => {\n      if (fnRef.current) {\n        fnRef.current();\n      }\n    },\n    [],\n  );\n}\n\nexport function useMount(fn: Function) {\n  useEffect(() => {\n    fn();\n  }, []);\n}\n","import React, {\n  useState,\n  useCallback,\n  useContext,\n  useEffect,\n  MutableRefObject,\n} from 'react';\nimport classNames from 'classnames';\nimport { message } from 'antd';\nimport ZoomContext from '../../../context/zoom-context';\nimport CameraButton from './camera';\nimport MicrophoneButton from './microphone';\nimport ScreenShareButton from './screen-share';\nimport ZoomMediaContext from '../../../context/media-context';\nimport { useUnmount } from '../../../hooks';\nimport './video-footer.scss';\ninterface VideoFooterProps {\n  className?: string;\n  shareRef?: MutableRefObject<HTMLCanvasElement | null>;\n  sharing?: boolean;\n}\nconst VideoFooter = (props: VideoFooterProps) => {\n  const { className, shareRef, sharing } = props;\n  const [isStartedAudio, setIsStartedAudio] = useState(false);\n  const [isStartedVideo, setIsStartedVideo] = useState(false);\n  const [isStartedScreenShare, setIsStartedScreenShare] = useState(false);\n  const [isMuted, setIsMuted] = useState(true);\n  const { mediaStream } = useContext(ZoomMediaContext);\n  const zmClient = useContext(ZoomContext);\n  const onCameraClick = useCallback(async () => {\n    if (isStartedVideo) {\n      await mediaStream?.stopVideo();\n      setIsStartedVideo(false);\n    } else {\n      await mediaStream?.startVideo();\n      setIsStartedVideo(true);\n    }\n  }, [mediaStream, isStartedVideo]);\n  const onMicrophoneClick = useCallback(async () => {\n    if (isStartedAudio) {\n      if (isMuted) {\n        await mediaStream?.unmuteAudio();\n        setIsMuted(false);\n      } else {\n        await mediaStream?.muteAudio();\n        setIsMuted(true);\n      }\n    } else {\n      await mediaStream?.startAudio();\n      setIsStartedAudio(true);\n    }\n  }, [mediaStream, isStartedAudio, isMuted]);\n  const onHostAudioMuted = useCallback((payload) => {\n    const { action, source, type } = payload;\n    if (action === 'join' && type === 'computer') {\n      setIsStartedAudio(true);\n    } else if (action === 'leave') {\n      setIsStartedAudio(false);\n    } else if (action === 'muted') {\n      setIsMuted(true);\n      if (source === 'passive(mute one)') {\n        message.info('Host muted you');\n      }\n    } else if (action === 'unmuted') {\n      setIsMuted(false);\n      if (source === 'passive') {\n        message.info('Host unmuted you');\n      }\n    }\n  }, []);\n  const onScreenShareClick = useCallback(async () => {\n    if (!isStartedScreenShare && shareRef && shareRef.current) {\n      await mediaStream?.startShareScreen(shareRef.current);\n      setIsStartedScreenShare(true);\n    } else if (isStartedScreenShare) {\n      await mediaStream?.stopShareScreen();\n      setIsStartedScreenShare(false);\n    }\n  }, [mediaStream, isStartedScreenShare, shareRef]);\n  const onPassivelyStopShare = useCallback(({ reason }) => {\n    console.log('passively stop reason:', reason);\n    setIsStartedScreenShare(false);\n  }, []);\n  useEffect(() => {\n    zmClient.on('current-audio-change', onHostAudioMuted);\n    zmClient.on('passively-stop-share', onPassivelyStopShare);\n    return () => {\n      zmClient.off('current-audio-change', onHostAudioMuted);\n      zmClient.off('passively-stop-share', onPassivelyStopShare);\n    };\n  }, [zmClient, onHostAudioMuted, onPassivelyStopShare]);\n  useUnmount(() => {\n    if (isStartedAudio) {\n      mediaStream?.stopAudio();\n    }\n    if (isStartedVideo) {\n      mediaStream?.stopVideo();\n    }\n    if (isStartedScreenShare) {\n      mediaStream?.stopShareScreen();\n    }\n  });\n  return (\n    <div className={classNames('video-footer', className)}>\n      <MicrophoneButton\n        isStartedAudio={isStartedAudio}\n        isMuted={isMuted}\n        onMicrophoneClick={onMicrophoneClick}\n      />\n      <CameraButton isStartedVideo={isStartedVideo} onCameraClick={onCameraClick} />\n      {sharing && (\n        <ScreenShareButton\n          isStartedScreenShare={isStartedScreenShare}\n          onScreenShareClick={onScreenShareClick}\n        />\n      )}\n    </div>\n  );\n};\nexport default VideoFooter;\n","/* eslint-disable react/jsx-boolean-value */\nimport React, { useCallback } from 'react';\nimport { CaretLeftOutlined, CaretRightOutlined } from '@ant-design/icons';\nimport { Button } from 'antd';\nimport classnames from 'classnames';\nimport './pagination.scss';\ninterface PaginationProps {\n  page: number;\n  totalPage: number;\n  setPage: (page: number) => void;\n  inSharing?: boolean;\n}\nconst Pagination = (props: PaginationProps) => {\n  const { page, totalPage, setPage, inSharing } = props;\n  const pageIndication = `${page + 1}/${totalPage}`;\n  const toPreviousPage = useCallback(() => {\n    if (page > 0) {\n      setPage(page - 1);\n    }\n  }, [page, setPage]);\n  const toNextPage = useCallback(() => {\n    if (page < totalPage - 1) {\n      setPage(page + 1);\n    }\n  }, [page, totalPage, setPage]);\n  return (\n    <div className={classnames('pagination', { 'in-sharing': inSharing })}>\n      <Button\n        key=\"left\"\n        className=\"previous-page-button\"\n        icon={<CaretLeftOutlined />}\n        ghost={true}\n        onClick={toPreviousPage}\n      >\n        {pageIndication}\n      </Button>\n      <Button\n        key=\"right\"\n        className=\"next-page-button\"\n        icon={<CaretRightOutlined />}\n        ghost={true}\n        onClick={toNextPage}\n      >\n        {pageIndication}\n      </Button>\n    </div>\n  );\n};\n\nexport default Pagination;\n","import _ from 'lodash';\nimport { useState, useCallback, useEffect, MutableRefObject } from 'react';\nimport { useSizeCallback, useMount } from '../../../hooks';\nimport { MediaStream } from '../../../index-types';\nexport function useCanvasDimension(\n  mediaStream: MediaStream | null,\n  videoRef: MutableRefObject<HTMLCanvasElement | null>,\n) {\n  const [dimension, setDimension] = useState({ width: 0, height: 0 });\n  const onCanvasResize = useCallback(\n    ({ width, height }) => {\n      if (videoRef) {\n        _.debounce((...args) => {\n          setDimension({\n            width: args[0],\n            height: args[1],\n          });\n        }, 300).call(null, width, height);\n      }\n    },\n    [videoRef],\n  );\n  useSizeCallback(videoRef.current, onCanvasResize);\n  useMount(() => {\n    if (videoRef.current) {\n      const { width, height } = videoRef.current.getBoundingClientRect();\n      setDimension({ width, height });\n    }\n  });\n  useEffect(() => {\n    const { width, height } = dimension;\n    try {\n      if (videoRef.current) {\n        videoRef.current.width = width;\n        videoRef.current.height = height;\n      }\n    } catch (e) {\n      mediaStream?.updateVideoCanvasDimension(\n        videoRef.current as HTMLCanvasElement,\n        width,\n        height,\n      );\n    }\n  }, [mediaStream, dimension, videoRef]);\n  return dimension;\n}\n","import { useLayoutEffect } from 'react';\ninterface ResizeObserverEntry {\n  target: Element;\n}\ntype ResizeObserverCallback = (entries: ResizeObserverEntry[]) => void;\nexport declare class ResizeObserver {\n  constructor(callback: ResizeObserverCallback);\n  observe(target: Element): void;\n  unobserve(target: Element): void;\n  disconnect(): void;\n}\n\nexport function useSizeCallback(\n  target: HTMLElement | null,\n  callback: (payload: { width: number; height: number }) => void,\n) {\n  useLayoutEffect(() => {\n    if (!target) {\n      return () => {\n        //\n      };\n    }\n    const resizeObserver = new ResizeObserver((entries) => {\n      entries.forEach((entry) => {\n        callback({\n          width: entry.target.clientWidth,\n          height: entry.target.clientHeight,\n        });\n      });\n    });\n    resizeObserver.observe(target);\n    return () => {\n      resizeObserver.unobserve(target);\n      resizeObserver.disconnect();\n    };\n  }, [target, callback]);\n}\n","import { CellLayout, Position } from './video-types';\n\ninterface OverlappingTarget {\n  topLeft: Position;\n  bottomRight: Position;\n}\ninterface Grid {\n  row: number;\n  column: number;\n}\ninterface Layout {\n  cellWidth: number;\n  cellHeight: number;\n  cellArea: number;\n  column: number;\n  row: number;\n}\nconst layoutCandidates: { [key: number]: Grid[] } = Array.from({ length: 9 })\n  .map((value, index) => {\n    const count = index + 1;\n    const mid = Math.ceil(count / 2);\n    const candidates = Array.from({ length: mid })\n      .map((v, i) => {\n        const row = i + 1;\n        const column = Math.ceil(count / row);\n        if (row < column) {\n          return [\n            {\n              row,\n              column,\n            },\n            {\n              row: column,\n              column: row,\n            },\n          ];\n        }\n        if (row === column) {\n          return [\n            {\n              row,\n              column,\n            },\n          ];\n        }\n        return [];\n      })\n      .reduce((prev, curr) => [...prev, ...curr], []);\n    return { count, candidates };\n  })\n  .reduce((prev, curr) => ({ ...prev, [curr.count]: curr.candidates }), {});\n\nconst aspectRatio = 16 / 9;\nconst minCellWidth = 256;\nconst minCellHeight = minCellWidth / aspectRatio;\nconst cellOffset = 5;\nconst maxCount = 9;\nconst VideoQuality = {\n  Video_90P: 0,\n  Video_180P: 1,\n  Video_360P: 2,\n  Video_720P: 3,\n};\nconst maxRowsColumns = (width: number, height: number) => ({\n  maxColumns: Math.max(1, Math.floor(width / (minCellWidth + cellOffset * 2))),\n  maxRows: Math.max(1, Math.floor(height / (minCellHeight + cellOffset * 2))),\n});\nexport function maxViewportVideoCounts(width: number, height: number) {\n  const { maxRows, maxColumns } = maxRowsColumns(width, height);\n  return maxRows * maxColumns;\n}\n\nexport function getVideoLayout(\n  rootWidth: number,\n  rootHeight: number,\n  count: number,\n): CellLayout[] {\n  /**\n   * [1,count]\n   */\n  if (count > maxCount || count === 0) {\n    return [];\n  }\n  let { maxRows, maxColumns } = maxRowsColumns(rootWidth, rootHeight);\n  maxRows = Math.min(maxRows, count);\n  maxColumns = Math.min(maxColumns, count);\n  const actualCount = Math.min(count, maxRows * maxColumns);\n  const layoutOfCount = layoutCandidates[actualCount].filter(\n    (item) => item.row <= maxRows && item.column <= maxColumns,\n  );\n  const preferredLayout: Layout = layoutOfCount\n    .map((item) => {\n      const { column, row } = item;\n      const canonical = Math.floor(\n        Math.min(rootWidth / (16 * column), rootHeight / (9 * row)),\n      );\n      const cellWidth = canonical * 16 - cellOffset * 2;\n      const cellHeight = canonical * 9 - cellOffset * 2;\n      return {\n        cellWidth,\n        cellHeight,\n        cellArea: cellWidth * cellHeight,\n        column,\n        row,\n      };\n    })\n    .reduce(\n      (prev, curr) => {\n        if (curr.cellArea > prev.cellArea) {\n          return curr;\n        }\n        return prev;\n      },\n      { cellArea: 0, cellHeight: 0, cellWidth: 0, column: 0, row: 0 },\n    );\n  const { cellWidth, cellHeight, column, row } = preferredLayout;\n  const cellBoxWidth = cellWidth + cellOffset * 2;\n  const cellBoxHeight = cellHeight + cellOffset * 2;\n  const horizontalMargin = (rootWidth - cellBoxWidth * column) / 2 + cellOffset;\n  const verticalMargin = (rootHeight - cellBoxHeight * row) / 2 + cellOffset;\n  const cellDimensions = [];\n  const lastRowColumns = column - ((column * row) % actualCount);\n  const lastRowMargin = (rootWidth - cellBoxWidth * lastRowColumns) / 2 + cellOffset;\n  let quality = VideoQuality.Video_90P;\n  if (actualCount <= 4 && cellHeight >= 270) {\n    quality = VideoQuality.Video_360P;\n  } else if (actualCount > 4 && cellHeight >= 180) {\n    quality = VideoQuality.Video_180P;\n  }\n  for (let i = 0; i < row; i++) {\n    for (let j = 0; j < column; j++) {\n      const leftMargin = i !== row - 1 ? horizontalMargin : lastRowMargin;\n      if (i * column + j < actualCount) {\n        cellDimensions.push({\n          width: cellWidth,\n          height: cellHeight,\n          x: Math.floor(leftMargin + j * cellBoxWidth),\n          y: Math.floor(verticalMargin + (row - i - 1) * cellBoxHeight),\n          quality,\n        });\n      }\n    }\n  }\n  return cellDimensions;\n}\n","import { useEffect, MutableRefObject } from 'react';\nimport { usePrevious, usePersistFn } from '../../../hooks';\nimport { isShallowEqual } from '../../../utils/util';\nimport { CellLayout } from '../video-types';\nimport { MediaStream, Participant } from '../../../index-types';\nexport function useRenderVideo(\n  mediaStream: MediaStream | null,\n  isVideoDecodeReady: boolean,\n  videoRef: MutableRefObject<HTMLCanvasElement | null>,\n  layout: CellLayout[],\n  subscribedVideos: number[],\n  participants: Participant[],\n) {\n  const previousSubscribedVideos = usePrevious(subscribedVideos);\n  const previousLayout = usePrevious(layout);\n  const previousParticipants = usePrevious(participants);\n  const previousIsVideoDecodeReady = usePrevious(isVideoDecodeReady);\n  useEffect(() => {\n    if (videoRef.current && layout && layout.length > 0 && isVideoDecodeReady) {\n      const addedSubscribers = subscribedVideos.filter(\n        (id) => !(previousSubscribedVideos || []).includes(id),\n      );\n      const removedSubscribers = (previousSubscribedVideos || []).filter(\n        (id: number) => !subscribedVideos.includes(id),\n      );\n      const unalteredSubscribers = subscribedVideos.filter((id) =>\n        (previousSubscribedVideos || []).includes(id),\n      );\n      if (removedSubscribers.length > 0) {\n        removedSubscribers.forEach(async (userId: number) => {\n          await mediaStream?.stopRenderVideo(\n            videoRef.current as HTMLCanvasElement,\n            userId,\n          );\n        });\n      }\n      if (addedSubscribers.length > 0) {\n        addedSubscribers.forEach(async (userId) => {\n          const index = participants.findIndex((user) => user.userId === userId);\n          const cellDimension = layout[index];\n          if (cellDimension) {\n            const { width, height, x, y, quality } = cellDimension;\n            await mediaStream?.renderVideo(\n              videoRef.current as HTMLCanvasElement,\n              userId,\n              width,\n              height,\n              x,\n              y,\n              quality,\n            );\n          }\n        });\n      }\n      if (unalteredSubscribers.length > 0) {\n        // layout changed\n        if (\n          previousLayout &&\n          (layout.length !== previousLayout.length ||\n            !isShallowEqual(layout[0], previousLayout[0]))\n        ) {\n          unalteredSubscribers.forEach((userId) => {\n            const index = participants.findIndex((user) => user.userId === userId);\n            const cellDimension = layout[index];\n            if (cellDimension) {\n              const { width, height, x, y } = cellDimension;\n              mediaStream?.adjustRenderedVideoPosition(\n                videoRef.current as HTMLCanvasElement,\n                userId,\n                width,\n                height,\n                x,\n                y,\n              );\n            }\n          });\n        }\n        // the order of participants changed\n        const participantsIds = participants.map((user) => user.userId);\n        const previousParticipantsIds = previousParticipants?.map(\n          (user) => user.userId,\n        );\n        if (participantsIds.join('-') !== previousParticipantsIds?.join('-')) {\n          unalteredSubscribers.forEach((userId) => {\n            const index = participantsIds.findIndex((id) => id === userId);\n            const previousIndex = previousParticipantsIds?.findIndex(\n              (id) => id === userId,\n            );\n            if (index !== previousIndex) {\n              const cellDimension = layout[index];\n              if (cellDimension) {\n                const { width, height, x, y } = cellDimension;\n                mediaStream?.adjustRenderedVideoPosition(\n                  videoRef.current as HTMLCanvasElement,\n                  userId,\n                  width,\n                  height,\n                  x,\n                  y,\n                );\n              }\n            }\n          });\n        }\n      }\n    }\n  }, [\n    mediaStream,\n    isVideoDecodeReady,\n    videoRef,\n    layout,\n    previousLayout,\n    participants,\n    previousParticipants,\n    subscribedVideos,\n    previousSubscribedVideos,\n  ]);\n\n  useEffect(() => {\n    if (\n      previousIsVideoDecodeReady === false &&\n      isVideoDecodeReady === true &&\n      subscribedVideos.length > 0\n    ) {\n      subscribedVideos.forEach(async (userId) => {\n        const index = participants.findIndex((user) => user.userId === userId);\n        const cellDimension = layout[index];\n        if (cellDimension) {\n          const { width, height, x, y, quality } = cellDimension;\n          await mediaStream?.renderVideo(\n            videoRef.current as HTMLCanvasElement,\n            userId,\n            width,\n            height,\n            x,\n            y,\n            quality,\n          );\n        }\n      });\n    }\n  }, [\n    mediaStream,\n    videoRef,\n    layout,\n    participants,\n    subscribedVideos,\n    isVideoDecodeReady,\n    previousIsVideoDecodeReady,\n  ]);\n  const stopAllVideos = usePersistFn((videoCanvasDOM: HTMLCanvasElement) => {\n    if (subscribedVideos.length > 0) {\n      subscribedVideos.forEach((userId) => {\n        mediaStream?.stopRenderVideo(videoCanvasDOM, userId);\n      });\n    }\n  });\n  useEffect(() => {\n    const videoCanvasDOM = videoRef.current;\n    return () => {\n      stopAllVideos(videoCanvasDOM);\n    };\n  }, [videoRef, stopAllVideos]);\n}\n","import { KJUR } from 'jsrsasign';\n\nexport function generateSignature(\n  sdkKey: string,\n  sdkSecret: string,\n  topic: string,\n  passWord = '',\n) {\n  let signature = '';\n  try {\n    const iat = Math.round(new Date().getTime() / 1000);\n    const exp = iat + 60 * 60 * 2;\n\n    // Header\n    const oHeader = { alg: 'HS256', typ: 'JWT' };\n    // Payload\n    const oPayload = {\n      app_key: sdkKey,\n      iat,\n      exp,\n      tpc: topic,\n      pwd: passWord,\n      // topic\n    };\n    // Sign JWT, password=616161\n    const sHeader = JSON.stringify(oHeader);\n    const sPayload = JSON.stringify(oPayload);\n    signature = KJUR.jws.JWS.sign('HS256', sHeader, sPayload, sdkSecret);\n  } catch (e) {\n    console.error(e);\n  }\n  return signature;\n}\n\nexport function isShallowEqual(objA: any, objB: any) {\n  if (objA === objB) {\n    return true;\n  }\n\n  if (!objA || !objB) {\n    return false;\n  }\n\n  const aKeys = Object.keys(objA);\n  const bKeys = Object.keys(objB);\n  const len = aKeys.length;\n\n  if (bKeys.length !== len) {\n    return false;\n  }\n\n  // eslint-disable-next-line no-plusplus\n  for (let i = 0; i < len; i++) {\n    const key = aKeys[i];\n\n    if (\n      objA[key] !== objB[key] ||\n      !Object.prototype.hasOwnProperty.call(objB, key)\n    ) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","import { useRef } from 'react';\n\nexport function usePersistFn(fn: Function) {\n  const fnRef = useRef<Function>(fn);\n  fnRef.current = fn;\n  const persistFn = useRef<Function>();\n  if (!persistFn.current) {\n    persistFn.current = function (...args: any) {\n      return fnRef.current.apply(this, args);\n    };\n  }\n  return persistFn.current;\n}\n","import { useCallback, useEffect, useState, MutableRefObject } from 'react';\nimport { getVideoLayout } from '../video-layout-helper';\nimport { useRenderVideo } from './useRenderVideo';\nimport { Dimension, Pagination, CellLayout } from '../video-types';\nimport { ZoomClient, MediaStream, Participant } from '../../../index-types';\n/**\n * Default order of video:\n *  1. video's participants first\n *  2. self on the second position\n */\nexport function useGalleryLayout(\n  zmClient: ZoomClient,\n  mediaStream: MediaStream | null,\n  isVideoDecodeReady: boolean,\n  videoRef: MutableRefObject<HTMLCanvasElement | null>,\n  dimension: Dimension,\n  pagination: Pagination,\n) {\n  const [visibleParticipants, setVisibleParticipants] = useState<Participant[]>([]);\n  const [layout, setLayout] = useState<CellLayout[]>([]);\n  const [subscribedVideos, setSubscribedVideos] = useState<number[]>([]);\n  const { page, pageSize, totalPage, totalSize } = pagination;\n  let size = pageSize;\n  if (page === totalPage - 1) {\n    size = Math.min(size, totalSize % pageSize || size);\n  }\n\n  useEffect(() => {\n    setLayout(getVideoLayout(dimension.width, dimension.height, size));\n  }, [dimension, size]);\n  const onParticipantsChange = useCallback(() => {\n    const participants = zmClient.getAllUser();\n    const currentUser = zmClient.getCurrentUserInfo();\n    if (currentUser && participants.length > 0) {\n      let pageParticipants: any[] = [];\n      if (participants.length === 1) {\n        pageParticipants = participants;\n      } else {\n        pageParticipants = participants\n          .filter((user) => user.userId !== currentUser.userId)\n          .sort((user1, user2) => Number(user2.bVideoOn) - Number(user1.bVideoOn));\n        pageParticipants.splice(1, 0, currentUser);\n        pageParticipants = pageParticipants.filter(\n          (_user, index) => Math.floor(index / pageSize) === page,\n        );\n      }\n      setVisibleParticipants(pageParticipants);\n      const videoParticipants = pageParticipants\n        .filter((user) => user.bVideoOn)\n        .map((user) => user.userId);\n      setSubscribedVideos(videoParticipants);\n    }\n  }, [zmClient, page, pageSize]);\n  useEffect(() => {\n    zmClient.on('user-added', onParticipantsChange);\n    zmClient.on('user-removed', onParticipantsChange);\n    zmClient.on('user-updated', onParticipantsChange);\n    return () => {\n      zmClient.off('user-added', onParticipantsChange);\n      zmClient.off('user-removed', onParticipantsChange);\n      zmClient.off('user-updated', onParticipantsChange);\n    };\n  }, [zmClient, onParticipantsChange]);\n  useEffect(() => {\n    onParticipantsChange();\n  }, [onParticipantsChange]);\n\n  useRenderVideo(\n    mediaStream,\n    isVideoDecodeReady,\n    videoRef,\n    layout,\n    subscribedVideos,\n    visibleParticipants,\n  );\n  return {\n    visibleParticipants,\n    layout,\n  };\n}\n","import { useState, useCallback, useEffect } from 'react';\nimport { maxViewportVideoCounts } from '../video-layout-helper';\nimport { useMount } from '../../../hooks';\nimport { Dimension } from '../video-types';\nimport { ZoomClient } from '../../../index-types';\nconst MAX_NUMBER_PER_PAGE = 9;\n// eslint-disable-next-line import/prefer-default-export\nexport function usePagination(zmClient: ZoomClient, dimension: Dimension) {\n  const [page, setPage] = useState(0);\n  const [totalSize, setTotalSize] = useState(0);\n  const [pageSize, setPageSize] = useState(MAX_NUMBER_PER_PAGE);\n  useEffect(() => {\n    const size = Math.min(\n      MAX_NUMBER_PER_PAGE,\n      maxViewportVideoCounts(dimension.width, dimension.height),\n    );\n    setPageSize(size);\n  }, [dimension]);\n  const onParticipantsChange = useCallback(() => {\n    setTotalSize(zmClient.getAllUser().length);\n  }, [zmClient]);\n  useEffect(() => {\n    zmClient.on('user-added', onParticipantsChange);\n    zmClient.on('user-removed', onParticipantsChange);\n    zmClient.on('user-updated', onParticipantsChange);\n    return () => {\n      zmClient.off('user-added', onParticipantsChange);\n      zmClient.off('user-removed', onParticipantsChange);\n      zmClient.off('user-updated', onParticipantsChange);\n    };\n  }, [zmClient, onParticipantsChange]);\n  useMount(() => {\n    setTotalSize(zmClient.getAllUser().length);\n  });\n  return {\n    page,\n    totalPage: Math.ceil(totalSize / pageSize),\n    pageSize,\n    totalSize,\n    setPage,\n  };\n}\n","import React, { useContext, useRef } from 'react';\nimport classnames from 'classnames';\nimport { RouteComponentProps } from 'react-router-dom';\nimport ZoomContext from '../../context/zoom-context';\nimport ZoomMediaContext from '../../context/media-context';\nimport Avatar from './components/avatar';\nimport VideoFooter from './components/video-footer';\nimport Pagination from './components/pagination';\nimport { useCanvasDimension } from './hooks/useCanvasDimension';\nimport { useGalleryLayout } from './hooks/useGalleryLayout';\nimport { usePagination } from './hooks/usePagination';\nimport { useActiveVideo } from './hooks/useAvtiveVideo';\nimport { useShare } from './hooks/useShare';\nimport './video.scss';\n\nconst VideoContainer: React.FunctionComponent<RouteComponentProps> = (props) => {\n  const zmClient = useContext(ZoomContext);\n  const {\n    mediaStream,\n    video: { decode: isVideoDecodeReady },\n  } = useContext(ZoomMediaContext);\n  const videoRef = useRef<HTMLCanvasElement | null>(null);\n  const shareRef = useRef<HTMLCanvasElement | null>(null);\n  const selfShareRef = useRef<HTMLCanvasElement | null>(null);\n  const shareContainerRef = useRef<HTMLDivElement | null>(null);\n  const canvasDimension = useCanvasDimension(mediaStream, videoRef);\n  const activeVideo = useActiveVideo(zmClient);\n  const { page, pageSize, totalPage, totalSize, setPage } = usePagination(\n    zmClient,\n    canvasDimension,\n  );\n  const { visibleParticipants, layout: videoLayout } = useGalleryLayout(\n    zmClient,\n    mediaStream,\n    isVideoDecodeReady,\n    videoRef,\n    canvasDimension,\n    {\n      page,\n      pageSize,\n      totalPage,\n      totalSize,\n    },\n  );\n  const { isRecieveSharing, isStartedShare, sharedContentDimension } = useShare(\n    zmClient,\n    mediaStream,\n    shareRef,\n  );\n  const isSharing = isRecieveSharing || isStartedShare;\n  const contentDimension = sharedContentDimension;\n  if (isSharing && shareContainerRef.current) {\n    const { width, height } = sharedContentDimension;\n    const {\n      width: containerWidth,\n      height: containerHeight,\n    } = shareContainerRef.current.getBoundingClientRect();\n    const ratio = Math.min(containerWidth / width, containerHeight / height, 1);\n    contentDimension.width = Math.floor(width * ratio);\n    contentDimension.height = Math.floor(height * ratio);\n  }\n\n  return (\n    <div className=\"viewport\">\n      <div\n        className={classnames('share-container', {\n          'in-sharing': isSharing,\n        })}\n        ref={shareContainerRef}\n      >\n        <div\n          className=\"share-container-viewport\"\n          style={{\n            width: `${contentDimension.width}px`,\n            height: `${contentDimension.height}px`,\n          }}\n        >\n          <canvas\n            className={classnames('share-canvas', { hidden: isStartedShare })}\n            ref={shareRef}\n          />\n          <canvas\n            className={classnames('share-canvas', { hidden: isRecieveSharing })}\n            ref={selfShareRef}\n          />\n        </div>\n      </div>\n      <div\n        className={classnames('video-container', {\n          'in-sharing': isSharing,\n        })}\n      >\n        <canvas\n          className=\"video-canvas\"\n          id=\"video-canvas\"\n          width=\"800\"\n          height=\"600\"\n          ref={videoRef}\n        />\n        <ul className=\"avatar-list\">\n          {visibleParticipants.map((user, index) => {\n            if (index > videoLayout.length - 1) {\n              return null;\n            }\n            const dimension = videoLayout[index];\n            const { width, height, x, y } = dimension;\n            const { height: canvasHeight } = canvasDimension;\n            return (\n              <Avatar\n                participant={user}\n                key={user.userId}\n                isActive={activeVideo === user.userId}\n                style={{\n                  width: `${width}px`,\n                  height: `${height}px`,\n                  top: `${canvasHeight - y - height}px`,\n                  left: `${x}px`,\n                }}\n              />\n            );\n          })}\n        </ul>\n      </div>\n      <VideoFooter className=\"video-operations\" sharing shareRef={selfShareRef} />\n      {totalPage > 1 && (\n        <Pagination\n          page={page}\n          totalPage={totalPage}\n          setPage={setPage}\n          inSharing={isSharing}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default VideoContainer;\n","import { useState, useCallback, useEffect } from 'react';\nimport { ZoomClient } from '../../../index-types';\nexport function useActiveVideo(zmClient: ZoomClient) {\n  const [activeVideo, setActiveVideo] = useState<number>(0);\n  const [activeSpeaker, setActiveSpeaker] = useState<number>(0);\n  const onVideoActiveChange = useCallback((payload) => {\n    const { state, userId } = payload;\n    if (state === 'Active') {\n      setActiveVideo(userId);\n    } else if (state === 'Inactive') {\n      setActiveVideo(0);\n    }\n  }, []);\n  const onActiveSpeakerChange = useCallback((payload) => {\n    if (Array.isArray(payload) && payload.length > 0) {\n      const { userId } = payload[0];\n      setActiveSpeaker(userId);\n    }\n  }, []);\n  useEffect(() => {\n    zmClient.on('video-active-change', onVideoActiveChange);\n    zmClient.on('active-speaker', onActiveSpeakerChange);\n    return () => {\n      zmClient.off('video-active-change', onVideoActiveChange);\n      zmClient.off('active-speaker', onActiveSpeakerChange);\n    };\n  }, [zmClient, onVideoActiveChange, onActiveSpeakerChange]);\n  return activeVideo || activeSpeaker;\n}\n","import { useState, useCallback, useEffect, MutableRefObject } from 'react';\nimport { useMount, usePrevious, useUnmount } from '../../../hooks';\nimport { ZoomClient, MediaStream } from '../../../index-types';\nexport function useShare(\n  zmClient: ZoomClient,\n  mediaStream: MediaStream | null,\n  shareRef: MutableRefObject<HTMLCanvasElement | null>,\n) {\n  const [isRecieveSharing, setIsReceiveSharing] = useState(false);\n  const [isStartedShare, setIsStartedShare] = useState(false);\n  const [activeSharingId, setActiveSharingId] = useState(0);\n  const [sharedContentDimension, setSharedContentDimension] = useState({\n    width: 0,\n    height: 0,\n  });\n  const [currentUserId, setCurrentUserId] = useState(0);\n  const onActiveShareChange = useCallback(\n    ({ state, userId }) => {\n      if (!isStartedShare) {\n        setActiveSharingId(userId);\n        setIsReceiveSharing(state === 'Active');\n      }\n    },\n    [isStartedShare],\n  );\n  const onSharedContentDimensionChange = useCallback(({ width, height }) => {\n    setSharedContentDimension({ width, height });\n  }, []);\n  const onCurrentUserUpdate = useCallback(\n    (payload) => {\n      if (Array.isArray(payload) && payload.length > 0) {\n        payload.forEach((item) => {\n          if (item.userId === currentUserId && item.sharerOn !== undefined) {\n            setIsStartedShare(item.sharerOn);\n            if (item.sharerOn) {\n              setIsReceiveSharing(false);\n            }\n          }\n        });\n      }\n    },\n    [currentUserId],\n  );\n  useEffect(() => {\n    zmClient.on('active-share-change', onActiveShareChange);\n    zmClient.on('share-content-dimension-change', onSharedContentDimensionChange);\n    zmClient.on('user-updated', onCurrentUserUpdate);\n    return () => {\n      zmClient.off('active-share-change', onActiveShareChange);\n      zmClient.off('share-content-dimension-change', onSharedContentDimensionChange);\n      zmClient.off('user-updated', onCurrentUserUpdate);\n    };\n  }, [\n    zmClient,\n    onActiveShareChange,\n    onSharedContentDimensionChange,\n    onCurrentUserUpdate,\n  ]);\n  const previousIsRecieveSharing = usePrevious(isRecieveSharing);\n  useEffect(() => {\n    if (shareRef.current && previousIsRecieveSharing !== isRecieveSharing) {\n      if (isRecieveSharing) {\n        mediaStream?.startShareView(shareRef.current, activeSharingId);\n      } else if (previousIsRecieveSharing === true && isRecieveSharing === false) {\n        mediaStream?.stopShareView();\n      }\n    }\n  }, [\n    mediaStream,\n    shareRef,\n    previousIsRecieveSharing,\n    isRecieveSharing,\n    activeSharingId,\n  ]);\n  useEffect(() => {\n    if (mediaStream) {\n      const activeSharedUserId = mediaStream.getActiveShareUserId();\n      if (activeSharedUserId) {\n        setIsReceiveSharing(true);\n        setActiveSharingId(activeSharedUserId);\n      }\n    }\n  }, [mediaStream]);\n  useMount(() => {\n    const currentUser = zmClient.getCurrentUserInfo();\n    if (currentUser) {\n      setCurrentUserId(currentUser.userId);\n    }\n  });\n  useUnmount(() => {\n    if (isRecieveSharing) {\n      mediaStream?.stopShareView();\n    }\n  });\n  return { isRecieveSharing, isStartedShare, sharedContentDimension };\n}\n","\nimport React from 'react';\nimport { ChatClient } from '../index-types';\nexport default React.createContext<ChatClient | null>(null);\n","import React from 'react';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport './loading-layer.scss';\n\nconst LoadingLayer = (props: { content: any }) => {\n  const { content } = props;\n  return (\n    <div className=\"loading-layer\">\n      <LoadingOutlined style={{ fontSize: '86px', color: '#fff' }} />\n      <p className=\"loading-text\">{content}</p>\n    </div>\n  );\n};\n\nexport default LoadingLayer;\n","export enum ChatPrivilege {\n  All = 1,\n  NoOne = 4,\n  EveryonePublicly = 5,\n}\n","/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { useCallback } from 'react';\nimport { UserOutlined } from '@ant-design/icons';\nimport { Button } from 'antd';\nimport classNames from 'classnames';\nimport { ChatRecord } from '../chat-types';\nimport './chat-message-item.scss';\ninterface ChatMessageItemProps {\n  record: ChatRecord;\n  currentUserId: number;\n  setChatUser: (userId: number) => void;\n}\nconst ChatMessageItem = (props: ChatMessageItemProps) => {\n  const { record, currentUserId, setChatUser } = props;\n  const { message, sender, receiver, timestamp } = record;\n  const { avatar } = sender;\n  const isCurrentUser = currentUserId === sender.userId;\n  const onAvatarClick = useCallback(() => {\n    if (!isCurrentUser) {\n      setChatUser(sender.userId);\n    }\n  }, [isCurrentUser, sender, setChatUser]);\n  const chatMessage = Array.isArray(message) ? message : [message];\n  return (\n    <div className={classNames('chat-message-item', { myself: isCurrentUser })}>\n      <Button\n        className=\"chat-message-avatar\"\n        onClick={onAvatarClick}\n        ghost\n        shape=\"circle\"\n        size=\"large\"\n      >\n        {avatar ? (\n          <img src={avatar} className=\"chat-message-avatar-img\" alt=\"\" />\n        ) : (\n          <UserOutlined />\n        )}\n      </Button>\n      <div className=\"chat-message-content\">\n        <div className={classNames('chat-message-info', { myself: isCurrentUser })}>\n          <p className=\"chat-message-receiver\">\n            {isCurrentUser ? '' : sender.name}\n            <span>To</span>\n            <a\n              href=\"#\"\n              onClick={(event) => {\n                event.preventDefault();\n                setChatUser(receiver.userId);\n              }}\n            >\n              {receiver.userId === currentUserId ? 'me' : receiver.name}\n            </a>\n          </p>\n          <p className=\"chat-message-time\">\n            {new Date(timestamp).toLocaleTimeString()}\n          </p>\n        </div>\n        <ul\n          className={classNames('chat-message-text-list', { myself: isCurrentUser })}\n        >\n          {chatMessage.map((text, index) => (\n            <li className={classNames('chat-message-text')} key={index}>\n              {text}\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n};\nexport default ChatMessageItem;\n","import React, { useCallback, useContext } from 'react';\nimport { Menu, Dropdown, Button } from 'antd';\nimport { CheckOutlined, DownOutlined, DashOutlined } from '@ant-design/icons';\nimport classNames from 'classnames';\nimport { ChatReceiver } from '../chat-types';\nimport { ChatPrivilege } from '../chat-constant';\nimport ChatContext from '../../../context/chat-context';\nimport './chat-receiver.scss';\nconst { Item: MenuItem, ItemGroup: MenuItemGroup } = Menu;\ninterface ChatReceiverProps {\n  chatUsers: ChatReceiver[];\n  selectedChatUser: ChatReceiver | null;\n  isHostOrManager: boolean;\n  setChatUser: (userId: number) => void;\n  chatPrivilege: number;\n}\nconst meetingChatPrivilegeList = [\n  {\n    name: 'No One',\n    value: ChatPrivilege.NoOne,\n  },\n  {\n    name: 'Everyone Publicly',\n    value: ChatPrivilege.EveryonePublicly,\n  },\n  {\n    name: 'Everyone Publicly and Directly',\n    value: ChatPrivilege.All,\n  },\n];\nconst ChatReceiverContainer = (props: ChatReceiverProps) => {\n  const {\n    chatUsers,\n    selectedChatUser,\n    chatPrivilege,\n    isHostOrManager,\n    setChatUser,\n  } = props;\n  const chatClient = useContext(ChatContext);\n  const menuItems = chatUsers.map((item) => (\n    <MenuItem\n      key={item.userId}\n      className={classNames('chat-receiver-item', {\n        selected: item.userId === selectedChatUser?.userId,\n      })}\n      icon={item.userId === selectedChatUser?.userId && <CheckOutlined />}\n    >\n      {item.displayName}\n      {(item.isCoHost || item.isHost) && (\n        <span className=\"chat-receiver-item-affix\">\n          ({item.isHost ? 'Host' : 'Co-host'})\n        </span>\n      )}\n    </MenuItem>\n  ));\n  const onMenuItemClick = useCallback(\n    ({ key }) => {\n      const userId = Number(key);\n      if (userId !== selectedChatUser?.userId) {\n        setChatUser(userId);\n      }\n    },\n    [selectedChatUser, setChatUser],\n  );\n  const onMenuItemPrivilegeClick = useCallback(\n    ({ key }) => {\n      const privilege = Number(key);\n      if (chatPrivilege !== privilege) {\n        chatClient?.setPrivilege(privilege);\n      }\n    },\n    [chatPrivilege, chatClient],\n  );\n  const menu = (\n    <Menu onClick={onMenuItemClick} className=\"chat-receiver-dropdown-menu\">\n      {menuItems}\n    </Menu>\n  );\n  let privilegeMenu: any = null;\n  if (isHostOrManager) {\n    const privilegeItems = meetingChatPrivilegeList;\n    const privilegeMenuItems = privilegeItems.map((item) => (\n      <MenuItem\n        key={item.value}\n        className={classNames('chat-privilege-item', {\n          selected: item.value === chatPrivilege,\n        })}\n        icon={item.value === chatPrivilege && <CheckOutlined />}\n      >\n        {item.name}\n      </MenuItem>\n    ));\n    privilegeMenu = (\n      <Menu\n        onClick={onMenuItemPrivilegeClick}\n        className=\"chat-receiver-dropdown-menu\"\n      >\n        <MenuItemGroup key=\"privilege\" title=\"Participant Can Chat With:\">\n          {privilegeMenuItems}\n        </MenuItemGroup>\n      </Menu>\n    );\n  }\n  return (\n    <div className=\"chat-receiver\">\n      <div className=\"chat-receiver-wrap\">\n        <span className=\"chat-to\">To:</span>\n        <Dropdown overlay={menu} placement=\"topLeft\" trigger={['click']}>\n          <Button className=\"chat-receiver-button\">\n            {selectedChatUser?.displayName} <DownOutlined />\n          </Button>\n        </Dropdown>\n      </div>\n      {isHostOrManager && (\n        <Dropdown overlay={privilegeMenu} placement=\"topRight\" trigger={['click']}>\n          <Button className=\"chat-privilege-button\">\n            <DashOutlined />\n          </Button>\n        </Dropdown>\n      )}\n    </div>\n  );\n};\nexport default ChatReceiverContainer;\n","import React, { useCallback, useContext, useEffect, useState, useRef } from 'react';\nimport produce from 'immer';\nimport { Input } from 'antd';\nimport ZoomContext from '../../context/zoom-context';\nimport { ChatReceiver, ChatRecord } from './chat-types';\nimport { useParticipantsChange } from './hooks/useParticipantsChange';\nimport ChatContext from '../../context/chat-context';\nimport ChatMessageItem from './component/chat-message-item';\nimport ChatReceiverContainer from './component/chat-receiver';\nimport { ChatPrivilege } from './chat-constant';\nimport { useMount } from '../../hooks';\nimport './chat.scss';\nconst { TextArea } = Input;\nconst ChatContainer = () => {\n  const zmClient = useContext(ZoomContext);\n  const chatClient = useContext(ChatContext);\n  const [chatRecords, setChatRecords] = useState<ChatRecord[]>([]);\n  const [currentUserId, setCurrentUserId] = useState<number>(0);\n  const [chatReceivers, setChatReceivers] = useState<ChatReceiver[]>([]);\n  const [chatPrivilege, setChatPrivilege] = useState<ChatPrivilege>(\n    ChatPrivilege.All,\n  );\n  const [chatUser, setChatUser] = useState<ChatReceiver | null>(null);\n  const [isHost, setIsHost] = useState<boolean>(false);\n  const [isManager, setIsManager] = useState<boolean>(false);\n  const [chatDraft, setChatDraft] = useState<string>('');\n  const chatWrapRef = useRef<HTMLDivElement | null>(null);\n  const onChatMessage = useCallback(\n    (payload: ChatRecord) => {\n      setChatRecords(\n        produce((records: ChatRecord[]) => {\n          const length = records.length;\n          if (length > 0) {\n            const lastRecord = records[length - 1];\n            if (\n              payload.sender.userId === lastRecord.sender.userId &&\n              payload.receiver.userId === lastRecord.receiver.userId &&\n              payload.timestamp - lastRecord.timestamp < 1000 * 60 * 5\n            ) {\n              if (Array.isArray(lastRecord.message)) {\n                lastRecord.message.push(payload.message as string);\n              } else {\n                lastRecord.message = [lastRecord.message, payload.message as string];\n              }\n            } else {\n              records.push(payload);\n            }\n          } else {\n            records.push(payload);\n          }\n        }),\n      );\n      if (chatWrapRef.current) {\n        chatWrapRef.current.scrollTo(0, chatWrapRef.current.scrollHeight);\n      }\n    },\n    [chatWrapRef],\n  );\n  const onChatPrivilegeChange = useCallback(\n    (payload) => {\n      setChatPrivilege(payload.chatPrivilege);\n      if (chatClient) {\n        setChatReceivers(chatClient.getReceivers());\n      }\n    },\n    [chatClient],\n  );\n  const onChatInput = useCallback(\n    (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n      setChatDraft(event.target.value);\n    },\n    [],\n  );\n  useEffect(() => {\n    zmClient.on('chat-on-message', onChatMessage);\n    return () => {\n      zmClient.off('chat-on-message', onChatMessage);\n    };\n  }, [zmClient, onChatMessage]);\n  useEffect(() => {\n    zmClient.on('chat-privilege-change', onChatPrivilegeChange);\n    return () => {\n      zmClient.off('chat-privilege-change', onChatPrivilegeChange);\n    };\n  }, [zmClient, onChatPrivilegeChange]);\n  useParticipantsChange(zmClient, () => {\n    if (chatClient) {\n      setChatReceivers(chatClient.getReceivers());\n    }\n    setIsHost(zmClient.isHost());\n    setIsManager(zmClient.isManager());\n  });\n  useEffect(() => {\n    if (chatUser) {\n      const index = chatReceivers.findIndex(\n        (user) => user.userId === chatUser.userId,\n      );\n      if (index === -1) {\n        setChatUser(chatReceivers[0]);\n      }\n    } else {\n      if (chatReceivers.length > 0) {\n        setChatUser(chatReceivers[0]);\n      }\n    }\n  }, [chatReceivers, chatUser]);\n  const setChatUserId = useCallback(\n    (userId) => {\n      const user = chatReceivers.find((u) => u.userId === userId);\n      if (user) {\n        setChatUser(user);\n      }\n    },\n    [chatReceivers],\n  );\n  const sendMessage = useCallback(\n    (event: React.KeyboardEvent<HTMLTextAreaElement>) => {\n      event.preventDefault();\n      if (chatUser && chatDraft) {\n        chatClient?.send(chatDraft, chatUser?.userId);\n        setChatDraft('');\n      }\n    },\n    [chatClient, chatDraft, chatUser],\n  );\n  useMount(() => {\n    setCurrentUserId(zmClient.getSessionInfo().userId);\n    if (chatClient) {\n      setChatPrivilege(chatClient.getPrivilege());\n    }\n  });\n  return (\n    <div className=\"chat-container\">\n      <div className=\"chat-wrap\">\n        <h2>Chat</h2>\n        <div className=\"chat-message-wrap\" ref={chatWrapRef}>\n          {chatRecords.map((record) => (\n            <ChatMessageItem\n              record={record}\n              currentUserId={currentUserId}\n              setChatUser={setChatUserId}\n              key={record.timestamp}\n            />\n          ))}\n        </div>\n        {ChatPrivilege.NoOne !== chatPrivilege || isHost || isManager ? (\n          <>\n            <ChatReceiverContainer\n              chatUsers={chatReceivers}\n              selectedChatUser={chatUser}\n              isHostOrManager={isHost || isManager}\n              chatPrivilege={chatPrivilege}\n              setChatUser={setChatUserId}\n            />\n            <div className=\"chat-message-box\">\n              <TextArea\n                onPressEnter={sendMessage}\n                onChange={onChatInput}\n                value={chatDraft}\n                placeholder=\"Type message here ...\"\n              />\n            </div>\n          </>\n        ) : (\n          <div className=\"chat-disabled\">Chat disabled</div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ChatContainer;\n","import { useEffect, useRef, useCallback } from 'react';\nimport { useMount } from '../../../hooks';\nimport { ZoomClient, Participant } from '../../../index-types';\nexport function useParticipantsChange(\n  zmClient: ZoomClient,\n  fn: (participants: Participant[]) => void,\n) {\n  const fnRef = useRef(fn);\n  fnRef.current = fn;\n  const callback = useCallback(() => {\n    const participants = zmClient.getAllUser();\n    fnRef.current && fnRef.current(participants);\n  }, [zmClient]);\n  useEffect(() => {\n    zmClient.on('user-added', callback);\n    zmClient.on('user-removed', callback);\n    zmClient.on('user-updated', callback);\n    return () => {\n      zmClient.off('user-added', callback);\n      zmClient.off('user-removed', callback);\n      zmClient.off('user-updated', callback);\n    };\n  }, [zmClient, callback]);\n  useMount(() => {\n    callback();\n  });\n}\n","import React, {\n  useEffect,\n  useContext,\n  useState,\n  useCallback,\n  useReducer,\n} from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport ZoomMtgCm from '@zoomus/instantsdk';\nimport { message, Modal } from 'antd';\nimport 'antd/dist/antd.css';\nimport produce from 'immer';\nimport Home from './feature/home/home';\nimport Video from './feature/video/video';\nimport ZoomContext from './context/zoom-context';\nimport ZoomMediaContext from './context/media-context';\nimport ChatContext from './context/chat-context';\nimport LoadingLayer from './component/loading-layer';\nimport Chat from './feature/chat/chat';\nimport { ChatClient, MediaStream } from './index-types';\nimport './App.css';\n\ninterface AppProps {\n  meetingArgs: {\n    sdkKey: string;\n    topic: string;\n    signature: string;\n    name: string;\n    password?: string;\n  };\n}\nconst mediaShape = {\n  audio: {\n    encode: false,\n    decode: false,\n  },\n  video: {\n    encode: false,\n    decode: false,\n  },\n  share: {\n    encode: false,\n    decode: false,\n  },\n};\nconst mediaReducer = produce((draft, action) => {\n  switch (action.type) {\n    case 'audio-encode': {\n      draft.audio.encode = action.payload;\n      break;\n    }\n    case 'audio-decode': {\n      draft.audio.decode = action.payload;\n      break;\n    }\n    case 'video-encode': {\n      draft.video.encode = action.payload;\n      break;\n    }\n    case 'video-decode': {\n      draft.video.decode = action.payload;\n      break;\n    }\n    case 'share-encode': {\n      draft.share.encode = action.payload;\n      break;\n    }\n    case 'share-decode': {\n      draft.share.decode = action.payload;\n      break;\n    }\n    default:\n      break;\n  }\n}, mediaShape);\n\nfunction App(props: AppProps) {\n  const {\n    meetingArgs: { sdkKey, topic, signature, name, password },\n  } = props;\n  const [loading, setIsLoading] = useState(true);\n  const [loadingText, setLoadingText] = useState('');\n  const [isFailover, setIsFailover] = useState<boolean>(false);\n  const [mediaState, dispatch] = useReducer(mediaReducer, mediaShape);\n  const [mediaStream, setMediaStream] = useState<MediaStream | null>(null);\n  const [chatClient, setChatClient] = useState<ChatClient | null>(null);\n  const zmClient = useContext(ZoomContext);\n  useEffect(() => {\n    const init = async () => {\n      await zmClient.init('en-US', `${window.location.origin}/lib`);\n      try {\n        setLoadingText('Joining the session...');\n        await zmClient.join(topic, signature, name, password);\n        setMediaStream(zmClient.getMediaStream());\n        const chatClient = zmClient.getChatClient();\n        setChatClient(chatClient);\n        setIsLoading(false);\n      } catch (e) {\n        setIsLoading(false);\n        message.error(e.reason);\n      }\n    };\n    init();\n    return () => {\n      ZoomMtgCm.destroyClient();\n    };\n  }, [sdkKey, signature, zmClient, topic, name, password]);\n  const onConnectionChange = useCallback(\n    (payload) => {\n      if (payload.state === 'Reconnecting') {\n        setIsLoading(true);\n        setIsFailover(true);\n        const { reason } = payload;\n        if (reason === 'failover') {\n          setLoadingText('Session Disconnected,Try to reconnect');\n        }\n      } else if (payload.state === 'Connected' && isFailover) {\n        setIsLoading(false);\n      } else if (payload.state === 'Closed') {\n        Modal.warning({\n          title: 'Session ended',\n          content: 'This session has been ended by host',\n        });\n      }\n    },\n    [isFailover],\n  );\n  const onMediaSDKChange = useCallback((payload) => {\n    const { action, type, result } = payload;\n    dispatch({ type: `${type}-${action}`, payload: result === 'success' });\n  }, []);\n  useEffect(() => {\n    zmClient.on('connection-change', onConnectionChange);\n    zmClient.on('media-sdk-change', onMediaSDKChange);\n    return () => {\n      zmClient.off('connection-change', onConnectionChange);\n      zmClient.off('media-sdk-change', onMediaSDKChange);\n    };\n  }, [zmClient, onConnectionChange, onMediaSDKChange]);\n  return (\n    <div className=\"App\">\n      {loading && <LoadingLayer content={loadingText} />}\n      {!loading && (\n        <ZoomMediaContext.Provider value={{ ...mediaState, mediaStream }}>\n          <ChatContext.Provider value={chatClient}>\n            <Router>\n              <Switch>\n                <Route path=\"/\" component={Home} exact />\n                <Route path=\"/video\" component={Video} />\n                <Route path=\"/chat\" component={Chat} />\n              </Switch>\n            </Router>\n          </ChatContext.Provider>\n        </ZoomMediaContext.Provider>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { getExploreName } from '../utils/platform';\n\nexport const devConfig = {\n  sdkKey: 'EorjEyn25QvtiMgG5K2IH92k0f2Hu4fe5iuh',\n  sdkSecret: 'Cw6zibGco8Wcl0Gh7vwho5gaNsxEl25NOZhe',\n  topic: 'test topic',\n  name: `${getExploreName()}-${Math.floor(Math.random() * 1000)}`,\n  password: '',\n  signature: '',\n};\n","// eslint-disable-next-line import/prefer-default-export\nexport function getExploreName() {\n  const { userAgent } = navigator;\n  if (userAgent.indexOf('Opera') > -1 || userAgent.indexOf('OPR') > -1) {\n    return 'Opera';\n  }\n  if (userAgent.indexOf('compatible') > -1 && userAgent.indexOf('MSIE') > -1) {\n    return 'IE';\n  }\n  if (userAgent.indexOf('Edge') > -1) {\n    return 'Edge';\n  }\n  if (userAgent.indexOf('Firefox') > -1) {\n    return 'Firefox';\n  }\n  if (userAgent.indexOf('Safari') > -1 && userAgent.indexOf('Chrome') === -1) {\n    return 'Safari';\n  }\n  if (userAgent.indexOf('Chrome') > -1 && userAgent.indexOf('Safari') > -1) {\n    return 'Chrome';\n  }\n  if (!!(window as any).ActiveXObject || 'ActiveXObject' in window) {\n    return 'IE>=11';\n  }\n  return 'Unkonwn';\n}\n","/* eslint-disable no-restricted-globals */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport ZoomMtgCm from '@zoomus/instantsdk';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport ZoomContext from './context/zoom-context';\nimport { devConfig } from './config/dev';\nimport { generateSignature } from './utils/util';\n\nlet meetingArgs: any = Object.fromEntries(new URLSearchParams(location.search));\nif (\n  !meetingArgs.sdkKey ||\n  !meetingArgs.topic ||\n  !meetingArgs.name ||\n  !meetingArgs.signature\n) {\n  meetingArgs = devConfig;\n}\nif (!meetingArgs.signature && meetingArgs.sdkSecret && meetingArgs.topic) {\n  meetingArgs.signature = generateSignature(\n    meetingArgs.sdkKey,\n    meetingArgs.sdkSecret,\n    meetingArgs.topic,\n    meetingArgs.password,\n  );\n}\n\nconst zmClient = ZoomMtgCm.createClient();\nReactDOM.render(\n  <React.StrictMode>\n    <ZoomContext.Provider value={zmClient}>\n      <App meetingArgs={meetingArgs as any} />\n    </ZoomContext.Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}